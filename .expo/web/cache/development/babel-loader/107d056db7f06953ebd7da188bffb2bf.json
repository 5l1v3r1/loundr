{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/Users/ikramgabiyev/react-native-workspace/loundr/screens/App/Profile/MyProfileScreen.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport * as ImagePicker from 'expo-image-picker';\nimport * as FileSystem from 'expo-file-system';\nimport CustomScrollView from \"../../../components/CustomScrollView\";\nimport MinorButton from \"../../../components/MinorButton\";\nimport Avatar from \"../../../components/Avatar\";\nimport OptionsButton from \"../../../components/OptionsButton\";\nimport Colors from \"../../../constants/colors\";\nimport FontSizes from \"../../../constants/fontSizes\";\nvar DEFAULT_AVATAR_PATH = '../../../assets/avatar.jpg';\nvar AVATAR_WIDTH_HEIGHT = 80;\nvar CENTRAL_PANEL_WIDTH = '100%';\n\nvar MyProfileScreen = function (_Component) {\n  _inherits(MyProfileScreen, _Component);\n\n  var _super = _createSuper(MyProfileScreen);\n\n  function MyProfileScreen() {\n    var _this;\n\n    _classCallCheck(this, MyProfileScreen);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      avatarSource: require(DEFAULT_AVATAR_PATH)\n    };\n\n    _this.openImagePickerAsync = function _callee() {\n      var permissionResult, pickerResult, fileName, permanentFilePath;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(ImagePicker.requestCameraRollPermissionsAsync());\n\n            case 2:\n              permissionResult = _context.sent;\n\n              if (!(permissionResult.granted === false)) {\n                _context.next = 6;\n                break;\n              }\n\n              Alert.alert('Access denied', 'You can grant access through settings later');\n              return _context.abrupt(\"return\");\n\n            case 6:\n              _context.next = 8;\n              return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync());\n\n            case 8:\n              pickerResult = _context.sent;\n\n              if (!(pickerResult.cancelled === true)) {\n                _context.next = 11;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 11:\n              fileName = pickerResult.uri.split('/').pop();\n              permanentFilePath = FileSystem.documentDirectory + fileName;\n              _context.prev = 13;\n              _context.next = 16;\n              return _regeneratorRuntime.awrap(FileSystem.moveAsync({\n                from: pickerResult.uri,\n                to: permanentFilePath\n              }));\n\n            case 16:\n              _this.setState({\n                avatarSource: {\n                  uri: permanentFilePath\n                }\n              });\n\n              _context.next = 23;\n              break;\n\n            case 19:\n              _context.prev = 19;\n              _context.t0 = _context[\"catch\"](13);\n              console.log(_context.t0);\n\n              _this.setState({\n                avatarSource: require(DEFAULT_AVATAR_PATH)\n              });\n\n            case 23:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[13, 19]], Promise);\n    };\n\n    return _this;\n  }\n\n  _createClass(MyProfileScreen, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(CustomScrollView, {\n        backgroundColor: Colors.backgroundGrey,\n        style: styles.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 4\n        }\n      }, React.createElement(View, {\n        style: styles.photoPickerContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 5\n        }\n      }, React.createElement(View, {\n        style: styles.imageContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 6\n        }\n      }, React.createElement(Avatar, {\n        source: this.state.avatarSource,\n        width: AVATAR_WIDTH_HEIGHT,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 7\n        }\n      })), React.createElement(MinorButton, {\n        color: Colors.logoColor,\n        style: styles.pickPhotoBtn,\n        title: \"Pick a photo\",\n        onPress: this.openImagePickerAsync,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 6\n        }\n      })), React.createElement(View, {\n        style: styles.options,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 17\n        }\n      }, React.createElement(OptionsButton, {\n        iconName: \"credit-card\",\n        title: \"Payment Methods\",\n        onPress: function onPress() {\n          _this2.props.navigation.navigate('PaymentMethods');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }\n      }), React.createElement(OptionsButton, {\n        iconName: \"lock\",\n        title: \"Privacy\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }\n      }), React.createElement(OptionsButton, {\n        iconName: \"user\",\n        title: \"Edit Profile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 21\n        }\n      }), React.createElement(OptionsButton, {\n        iconName: \"sign-out\",\n        title: \"Sign Out\",\n        isLast: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }\n      })));\n    }\n  }]);\n\n  return MyProfileScreen;\n}(Component);\n\nvar styles = StyleSheet.create({\n  container: {\n    alignItems: 'center'\n  },\n  photoPickerContainer: {\n    width: CENTRAL_PANEL_WIDTH,\n    alignItems: 'center'\n  },\n  imageContainer: {\n    width: AVATAR_WIDTH_HEIGHT,\n    height: AVATAR_WIDTH_HEIGHT,\n    marginVertical: 30\n  },\n  options: {\n    width: CENTRAL_PANEL_WIDTH,\n    backgroundColor: Colors.customWhite,\n    marginVertical: 30,\n    borderBottomWidth: 1,\n    borderBottomColor: Colors.placeHolderColor,\n    borderTopWidth: 1,\n    borderTopColor: Colors.placeHolderColor\n  }\n});\nexport default MyProfileScreen;","map":{"version":3,"sources":["/Users/ikramgabiyev/react-native-workspace/loundr/screens/App/Profile/MyProfileScreen.js"],"names":["React","Component","ImagePicker","FileSystem","CustomScrollView","MinorButton","Avatar","OptionsButton","Colors","FontSizes","DEFAULT_AVATAR_PATH","AVATAR_WIDTH_HEIGHT","CENTRAL_PANEL_WIDTH","MyProfileScreen","state","avatarSource","require","openImagePickerAsync","requestCameraRollPermissionsAsync","permissionResult","granted","Alert","alert","launchImageLibraryAsync","pickerResult","cancelled","fileName","uri","split","pop","permanentFilePath","documentDirectory","moveAsync","from","to","setState","console","log","backgroundGrey","styles","container","photoPickerContainer","imageContainer","logoColor","pickPhotoBtn","options","props","navigation","navigate","StyleSheet","create","alignItems","width","height","marginVertical","backgroundColor","customWhite","borderBottomWidth","borderBottomColor","placeHolderColor","borderTopWidth","borderTopColor"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { StyleSheet, View, Alert } from 'react-native';\n\n//outside imports\nimport * as ImagePicker from 'expo-image-picker';\nimport * as FileSystem from 'expo-file-system';\n\n//components\nimport CustomScrollView from '../../../components/CustomScrollView';\nimport MinorButton from '../../../components/MinorButton';\nimport Avatar from '../../../components/Avatar';\nimport OptionsButton from '../../../components/OptionsButton';\n\n//constants\nimport Colors from '../../../constants/colors';\nimport FontSizes from '../../../constants/fontSizes';\nconst DEFAULT_AVATAR_PATH = '../../../assets/avatar.jpg'\nconst AVATAR_WIDTH_HEIGHT = 80; // the profile photo's side length (for borderRadius and uri photos)\nconst CENTRAL_PANEL_WIDTH = '100%'\n\nclass MyProfileScreen extends Component {\n\tstate = {\n\t\tavatarSource: require(DEFAULT_AVATAR_PATH),\n\t};\n\n    /**\n     * handling the click \"Pick a photo\"\n     */\n    openImagePickerAsync = async () => {\n        //asking for permission if haven't asked already\n        const permissionResult = await ImagePicker.requestCameraRollPermissionsAsync();\n    \n        //if permission not granted - stop the function\n        if (permissionResult.granted === false) {\n            Alert.alert('Access denied', 'You can grant access through settings later');\n            return;\n        }\n    \n        //open the Camera Roll and store user's choice\n        const pickerResult = await ImagePicker.launchImageLibraryAsync();\n        \n        //if the user did not pick anything - stop the function\n        if (pickerResult.cancelled === true) {\n            return;\n        }\n        \n        //if the user picked an image\n        //store its initial uri - position in the cache\n        //to get the name of the file\n        const fileName = pickerResult.uri.split('/').pop();\n\n        //create a path with that file name in the document directory\n        //which is a permanent local memry of the app on the phone\n        const permanentFilePath = FileSystem.documentDirectory + fileName;\n\n        //if no errors move the image from cache to permanent storage\n        try {\n            await FileSystem.moveAsync({\n                from: pickerResult.uri,\n                to: permanentFilePath,\n            })\n\n            //update the state and the DB (later)\n            this.setState({\n                avatarSource: {\n                    uri: permanentFilePath,\n                },\n            });\n\n            //also send it to DB\n\n        } \n        //if you got an error log it and use the avatar image from assets\n        catch(err) {\n            console.log(err);\n            this.setState({\n                avatarSource: require(DEFAULT_AVATAR_PATH),\n            });\n        }\n    };\n\n\trender() {\n\t\treturn (\n\t\t\t<CustomScrollView backgroundColor={Colors.backgroundGrey} style={styles.container}>\n                {/* container for the photo picking stuff */}\n\t\t\t\t<View style={styles.photoPickerContainer}>\n                    {/* the avatar container */}\n\t\t\t\t\t<View style={styles.imageContainer}>\n\t\t\t\t\t\t<Avatar source={this.state.avatarSource} width={AVATAR_WIDTH_HEIGHT} />\n\t\t\t\t\t</View>\n                    {/* \"pick the photo\" button */}\n\t\t\t\t\t<MinorButton\n\t\t\t\t\t\tcolor={Colors.logoColor}\n\t\t\t\t\t\tstyle={styles.pickPhotoBtn}\n\t\t\t\t\t\ttitle=\"Pick a photo\"\n\t\t\t\t\t\tonPress={this.openImagePickerAsync}\n\t\t\t\t\t/>\n\t\t\t\t</View>\n                <View style={styles.options}>\n                    <OptionsButton iconName=\"credit-card\" title=\"Payment Methods\" onPress={() => {\n                        this.props.navigation.navigate('PaymentMethods')\n                    }}/>\n                    <OptionsButton iconName=\"lock\" title=\"Privacy\" />\n                    <OptionsButton iconName=\"user\" title=\"Edit Profile\" />\n                    <OptionsButton iconName=\"sign-out\" title=\"Sign Out\" isLast />\n                </View>\n        \t</CustomScrollView>\n\t\t);\n\t}\n}\n\nconst styles = StyleSheet.create({\n\tcontainer: {\n        alignItems: 'center',\n    },\n\tphotoPickerContainer: {\n        width: CENTRAL_PANEL_WIDTH,\n        alignItems: 'center',\n\t},\n\timageContainer: {\n\t\twidth: AVATAR_WIDTH_HEIGHT,\n\t\theight: AVATAR_WIDTH_HEIGHT,\n\t\tmarginVertical: 30,\n\t},\n    options: {\n        width: CENTRAL_PANEL_WIDTH,\n        backgroundColor: Colors.customWhite,\n        marginVertical: 30,\n        borderBottomWidth: 1,\n        borderBottomColor: Colors.placeHolderColor,\n        borderTopWidth: 1,\n        borderTopColor: Colors.placeHolderColor,\n    }\n});\n\nexport default MyProfileScreen;\n"]},"metadata":{},"sourceType":"module"}